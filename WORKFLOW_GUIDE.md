# 작업 워크플로우 가이드

> **목적**: Claude Code와 협업 시 토큰 만료를 방지하고 작업 연속성을 유지하기 위한 가이드

---

## 🎯 왜 이 워크플로우가 필요한가?

### 문제점
1. **토큰 만료**: 긴 작업 중 Claude Code 세션이 만료되면 컨텍스트 손실
2. **작업 중단**: 갑작스러운 중단 시 어디까지 했는지 추적 어려움
3. **변경 이력**: Git 커밋만으로는 "왜" 변경했는지 알기 어려움

### 해결책
- **WORK_LOG.md**: 모든 작업을 상세히 기록
- **시작 전 기록**: 무엇을 할 것인지 명확히
- **완료 후 기록**: 무엇을 했는지, 왜 했는지 상세히

---

## 📝 작업 워크플로우

### 1️⃣ 작업 시작 전

#### Step 1: WORK_LOG.md 열기
```bash
code WORK_LOG.md
```

#### Step 2: TODO 섹션에 작업 추가
```markdown
## 🚧 TODO (진행 예정 작업)

### [작업명 간략히]
- **시작일**: 2025-12-11 10:00
- **담당**: Claude Code
- **목표**: 무엇을 달성할 것인가?
- **배경**: 왜 이 작업이 필요한가?
- **예상 파일**:
  - `경로/파일1.py`
  - `경로/파일2.py`
- **예상 시간**: 30분 (선택사항)
```

#### Step 3: Claude Code에게 작업 요청
```
WORK_LOG.md의 TODO 섹션에 추가한 "[작업명]" 작업을 시작해줘.
작업 완료 후 WORK_LOG.md를 업데이트해줘.
```

---

### 2️⃣ 작업 진행 중

Claude Code가 자동으로:
1. 코드 수정
2. 테스트
3. Git 커밋
4. 에러 수정 (필요 시)

사용자는:
- 중간 확인
- 추가 요구사항 전달
- 에러 로그 공유

---

### 3️⃣ 작업 완료 후

#### Claude Code가 자동으로 수행:

1. **TODO → DONE 이동**
```markdown
## ✅ DONE (완료된 작업)

### 2025-12-11: [작업명]
- **완료일**: 2025-12-11 10:30
- **Git 커밋**: `abc1234`
- **소요 시간**: 30분
```

2. **변경 사항 상세 기록**
```markdown
- **문제**: 기존 문제점 설명
- **해결**: 어떻게 해결했는지
- **변경 파일**:
  - `파일1.py:123-145` - 변경 내용
  - `파일2.py:67` - 변경 내용
- **테스트**: 테스트 결과
```

3. **Git 커밋 및 푸시**
```bash
git add WORK_LOG.md [변경된 파일들]
git commit -m "작업명 - 간단한 설명"
git push origin main
```

---

## 🔄 작업 재개 (토큰 만료 후)

### 시나리오: Claude Code 세션이 만료되었을 때

#### Step 1: WORK_LOG.md 확인
```bash
cat WORK_LOG.md
```

#### Step 2: 마지막 작업 확인
- **DONE 섹션**: 완료된 작업
- **TODO 섹션**: 진행 중이거나 예정된 작업

#### Step 3: Claude Code에게 컨텍스트 제공
```
WORK_LOG.md를 참고해서 어제 중단된 작업을 계속 진행해줘.
마지막으로 완료한 작업: [작업명]
다음 작업: [작업명]
```

---

## 📋 작업 템플릿

### TODO 템플릿
```markdown
### [작업명]
- **시작일**: YYYY-MM-DD HH:mm
- **담당**: Claude Code
- **목표**: [한 문장으로 목표 설명]
- **배경**: [왜 이 작업이 필요한지]
- **예상 파일**:
  - `경로/파일1.py` - [예상 변경 내용]
  - `경로/파일2.md` - [예상 변경 내용]
- **예상 시간**: [선택사항]
- **관련 이슈**: [선택사항]
```

### DONE 템플릿
```markdown
### YYYY-MM-DD: [작업명]
- **완료일**: YYYY-MM-DD HH:mm
- **Git 커밋**: `해시값`
- **소요 시간**: [실제 소요 시간]

#### 문제
[기존 문제점 또는 작업 배경]

#### 해결
[어떻게 해결했는지 상세히]

#### 변경 파일
- `파일1.py:123-145` - [변경 내용 설명]
- `파일2.py:67` - [변경 내용 설명]
- `파일3.md` (신규) - [새 파일 설명]

#### 주요 변경 사항
\`\`\`python
# Before
기존_코드()

# After
새로운_코드()
\`\`\`

#### 테스트
- [x] 로컬 테스트 통과
- [x] 서버 재시작 확인
- [ ] 프로덕션 배포 대기

#### 참고
- [관련 문서 링크]
- [외부 참조 링크]
```

---

## 🎨 작업 유형별 가이드

### 버그 수정
```markdown
### 버그 수정: [버그 간략 설명]
- **문제**: [에러 메시지 또는 잘못된 동작]
- **원인**: [버그 발생 원인]
- **해결**: [수정 방법]
- **재발 방지**: [어떻게 방지할 것인가]
```

### 새 기능 추가
```markdown
### 새 기능: [기능명]
- **목적**: [왜 이 기능이 필요한가]
- **사용자 스토리**: [사용자가 무엇을 할 수 있는가]
- **구현 방법**: [기술적 접근 방법]
- **테스트 계획**: [어떻게 테스트할 것인가]
```

### 리팩토링
```markdown
### 리팩토링: [대상 코드]
- **이유**: [왜 리팩토링이 필요한가]
- **개선 사항**: [무엇을 개선할 것인가]
- **위험 요소**: [기존 기능에 영향이 있는가]
- **테스트**: [회귀 테스트 계획]
```

### 문서 작성/수정
```markdown
### 문서: [문서명]
- **목적**: [누가, 왜 읽을 것인가]
- **내용**: [주요 섹션]
- **대상 독자**: [개발자/사용자/관리자]
```

---

## ⚡ 빠른 참조

### 작업 시작
```bash
# 1. WORK_LOG.md 열기
code WORK_LOG.md

# 2. TODO 섹션에 작업 추가
# 3. Claude Code에게 요청
"WORK_LOG.md의 TODO에 추가한 [작업명] 시작해줘"
```

### 작업 완료
```bash
# Claude Code가 자동으로:
# 1. TODO → DONE 이동
# 2. 변경 사항 기록
# 3. Git 커밋 및 푸시
```

### 작업 재개
```bash
# 1. WORK_LOG.md 확인
cat WORK_LOG.md

# 2. Claude Code에게 요청
"WORK_LOG.md 참고해서 어제 중단된 작업 계속해줘"
```

---

## 🔧 Claude Code 전용 지침

> **Claude Code가 작업 시 반드시 따라야 할 규칙**

### 작업 시작 시
1. `WORK_LOG.md`의 TODO 섹션 확인
2. 작업 항목이 있으면 읽고 이해
3. 작업 항목이 없으면 사용자에게 추가 요청

### 작업 진행 중
1. 중요한 결정사항은 사용자에게 확인
2. 에러 발생 시 즉시 해결 시도
3. 해결 불가능한 경우 사용자에게 보고

### 작업 완료 시
1. **반드시** TODO → DONE 이동
2. **반드시** 변경 파일 목록 기록
3. **반드시** Git 커밋 해시 기록
4. **반드시** 주요 변경 사항 설명
5. WORK_LOG.md를 Git에 커밋

### 커밋 메시지 규칙
```
[작업 유형]: [간단한 설명]

- 상세 변경 내용 1
- 상세 변경 내용 2
- 관련 이슈: #123 (선택)
```

예시:
```
버그 수정: FFprobe 경로 찾기 실패

- MoviePy를 우선 사용하도록 변경
- FFmpeg stderr 파싱 fallback 추가
- 기본값 5초 최종 fallback
```

---

## 📊 작업 추적

### 일일 체크리스트
- [ ] 오늘 할 작업을 TODO에 추가했는가?
- [ ] 완료한 작업을 DONE으로 이동했는가?
- [ ] Git 커밋 해시를 기록했는가?
- [ ] 변경 파일 목록을 기록했는가?
- [ ] WORK_LOG.md를 커밋했는가?

### 주간 리뷰
- 이번 주 완료한 작업: N개
- 주요 성과:
- 다음 주 계획:

---

## 🎓 Best Practices

### DO ✅
- 작업 시작 전 반드시 TODO에 추가
- 완료 후 반드시 DONE으로 이동
- 커밋 메시지와 WORK_LOG 내용 일치
- 에러와 해결 방법 상세히 기록
- 왜 이렇게 했는지 이유 기록

### DON'T ❌
- WORK_LOG 업데이트 없이 코드 변경
- 커밋만 하고 WORK_LOG 업데이트 안 함
- "작업 완료" 같은 모호한 기록
- 에러 메시지 생략
- 이유 없이 코드 변경

---

## 🆘 문제 해결

### Q: WORK_LOG.md가 너무 길어졌어요
A: 월별로 아카이브하세요
```bash
mv WORK_LOG.md WORK_LOG_2025_12.md
# 새 WORK_LOG.md 생성
```

### Q: TODO와 DONE이 섞여서 혼란스러워요
A: TODO는 항상 위에, DONE은 최신순으로 아래에 배치

### Q: 작업 중 갑자기 중단되었어요
A: TODO 섹션에 "⚠️ 중단됨" 표시 추가
```markdown
### ⚠️ [작업명] - 중단됨
- **중단 시점**: 2025-12-11 15:30
- **완료율**: 70%
- **다음 할 일**: [구체적으로]
```

---

## 📚 관련 문서

- `WORK_LOG.md` - 실제 작업 기록
- `CLAUDE.md` - Claude Code 프로젝트 가이드
- `README.md` - 프로젝트 개요
- `TROUBLESHOOTING.md` - 문제 해결 가이드

---

**작성일**: 2025-12-11
**버전**: 1.0
**작성자**: Claude Code (Sonnet 4.5)
